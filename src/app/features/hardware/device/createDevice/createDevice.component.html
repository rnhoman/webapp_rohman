<!-- MAIN CONTENT -->
<div id="content">
    <div class="row">
      <sa-big-breadcrumbs [items]="['Device Management', 'Create Device']" icon="pencil-square-o" class="col-xs-12 col-sm-7 col-md-7 col-lg-4"></sa-big-breadcrumbs>
      
    </div>
    <!-- widget grid -->
    <sa-widgets-grid>
  
      <div class="row">
        <article class="col-sm-12 col-md-12 col-lg-12">
          <div sa-widget [togglebutton]="false" [collapsed]="false" [deletebutton]="false" [colorbutton]="false" [editbutton]="false" [custombutton]="false" [fullscreenbutton]="false">
            <header>
              <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
              <h2>Create Device</h2>
            </header>
            <div>
              <div class="widget-body no-padding">
                <form class="smart-form">
                  <fieldset>
                    <section class="col col-4">
                      <label class="label">Client Company <b class="text-danger">*</b></label>
                      <label class="select">
                        <select name="openform_client" [(ngModel)]="openform_client" (change)="openModal(template)">
                          <option *ngFor="let client of client_array" [ngValue]="client.id">{{ client.company}}</option>
                          <option value="open" class="text-success" style="font-weight: 1000">-- Add New Client Company --</option>
                        </select> <i class="fa fa-plus"></i>
                      </label>
                    </section>

                    <section class="col col-4">
                      <label class="label">Zona Location <b class="text-danger">*</b></label>
                      <label class="select">
                        <select name="openform_zona" [(ngModel)]="openform_zona" (change)="openModal_zona(template_zona)">
                          <option *ngFor="let zona of zona_array" [ngValue]="zona.id">{{zona.zona_name}}</option>
                          <option value="open" class="text-success" style="font-weight: 1000">-- Add New Zona Location --</option>
                        </select> <i class="fa fa-plus"></i>
                      </label>
                    </section>

                    <section class="col col-4">
                      <label class="label">Panel Location <b class="text-danger">*</b></label>
                      <label class="select">
                        <select name="openform_panel" [(ngModel)]="openform_panel" (change)="openModal_panel(template_panel)">
                          <option *ngFor="let panel of panel_array" [ngValue]="panel.panel_name">{{panel.panel_name}}</option>
                          <option value="open" class="text-success" style="font-weight: 1000">-- Add New Panel Location --</option>
                        </select> <i class="fa fa-plus"></i>
                      </label>
                    </section>

                  </fieldset>
                  <fieldset>
                    <section class="col col-6">
                      <label class="label">Device ID <b class="text-danger">*</b></label>
                      <label class="input">
                        <input type="text">
                      </label>
                    </section>

                    <section class="col col-6">
                        <label class="label">Device Category <b class="text-danger">*</b></label>
                        <label class="select">
                          <select>
                            <option value="0">-- Device Category --</option>
                            <option *ngFor="let devicecat of devicecat_array" [ngValue]="devicecat.category">{{devicecat.category}}</option>
                          </select> <i class="fa fa-plus"></i>
                        </label>
                    </section>

                    <section class="col col-6">
                        <label class="label">kWh Meter Status <b class="text-danger">*</b></label>
                        <div class="inline-group">
                          <label class="radio">
                            <input type="radio" name="radio-inline" checked="checked">
                            Incoming
                             <i></i>
                          </label>
                          <label class="radio">
                            <input type="radio" name="radio-inline">
                            <i></i>Outgoing</label>
                        </div>
                    </section>

                    <section class="col col-6">
                      <label class="label" placeholder="device id">Device Status <b class="text-danger">*</b></label>
                      <label class="toggle">
                        <input type="checkbox" name="checkbox-toggle" checked="checked">
                        <i data-swchon-text="OFF" data-swchoff-text="ON"></i></label>
                    </section>
                  </fieldset>
  
                  <footer>
                    <button type="submit" class="btn btn-primary">
                      <i class="fa fa-save"></i> Submit
                    </button>
                    <button type="button" class="btn btn-default" onclick="window.history.back();">
                      <i class="fa fa-retweet"></i> Cancel
                    </button>
                  </footer>
                </form>
              </div>
            </div>
          </div>
        </article>
      </div>
    </sa-widgets-grid>
  </div>

  <!-- Modal Template of New Client Form -->
  <ng-template #template>
      <div class="modal-header">
        <h4 class="modal-title pull-left">Create New Client Company</h4>
        <button type="button" class="close pull-right" (click)="closeFirstModal()" aria-label="Close" >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="smart-form" novalidate="novalidate">
          
          <fieldset>
              
              <section>
                <label class="label">Company Name</label>
                <label class="input">
                  <i class="icon-append fa fa-building"></i>
                  <input type="text" name="company" placeholder="Company Name" [(ngModel)]="company">
                </label>
              </section>
          
              <section>
                <label class="label">Office Address</label>
                <label class="textarea">
                  <i class="icon-append fa fa-map-marker"></i>
                  <textarea rows="3" name="address" [(ngModel)]="address"></textarea>
                </label>
              </section>

              <section>
                  <label class="label">Phone Number</label>
                  <label class="input">
                    <i class="icon-append fa fa-phone"></i>
                    <input type="number" name="phone" [(ngModel)]="phone"/>
                  </label>
                </section>

              <div class="row">
                  <section class="col col-6">
                      <label for="name">Contract Date</label>
                    <label class="input">
                      <i class="icon-append fa fa-calendar"></i>
                      <input type="text" name="contract_date" [(ngModel)]="contract_date" id="startdate" [saUiDatepicker]="{minRestrict:'#finishdate'}" placeholder="Expected start date" />
                    </label>
                  </section>
                  <section class="col col-6">
                      <label for="name"></label>
                    <label class="input">
                      <i class="icon-append fa fa-calendar"></i>
                      <input type="text" name="contract_date" [(ngModel)]="contract_date" id="finishdate" [saUiDatepicker]="{maxRestrict:'#startdate'}" placeholder="Expected finish date"/>
                    </label>
                  </section>
                </div>

            </fieldset>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" (click)="closeFirstModal()">Cancel</button>
        <button type="button" class="btn btn-success" *ngIf="!client.id" (click)="createClient(company);">Create</button>
      </div>
  </ng-template>

  <!-- Modal Template of New Zona Form -->
  <ng-template #template_zona>
    <div class="modal-header">
      <h4 class="modal-title pull-left">Create New Zona Locations</h4>
      <button type="button" class="close pull-right" (click)="closeFirstModal()" aria-label="Close" >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form class="smart-form" novalidate="novalidate">
        
        <fieldset>
            
            <section>
              <label class="label">Client Company <b class="text-danger">*</b></label>
              <label class="select">
                <select>
                  <option value="0">-- Select Client Company --</option>
                  <option *ngFor="let client of client_array" [ngValue]="client.company">{{ client.company}}</option>
                </select> <i class="fa fa-plus"></i>
              </label>
            </section>
        
            <section>
              <label class="label">Zona Name</label>
              <label class="input">
                <i class="icon-append fa fa-building"></i>
                <input type="text" name="company" placeholder="Zona Name" [(ngModel)]="company">
              </label>
            </section>

            <section>
              <label class="label"><i class="fa fa-map-marker"></i>&nbsp;<strong>LOCATION COORDINATES</strong></label>
              <hr>
            </section>

            <div class="row">
              <section class="col col-6">
                <label for="name">Latittude</label>
                <label class="input">
                  <i class="icon-append fa fa-map-marker"></i>
                  <input type="text" name="lat" [(ngModel)]="contract_date"/>
                </label>
              </section>
              <section class="col col-6">
                <label for="name">Longitude</label>
                <label class="input">
                  <i class="icon-append fa fa-map-marker"></i>
                  <input type="text" name="long" [(ngModel)]="contract_date"/>
                </label>
              </section>
            </div>

          </fieldset>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" (click)="closeFirstModal()">Cancel</button>
      <button type="button" class="btn btn-success" *ngIf="!client.id" (click)="createClient(company);">Create</button>
    </div>
  </ng-template>

  <!-- Modal Template of New Panel Form -->
  <ng-template #template_panel>
    <div class="modal-header">
      <h4 class="modal-title pull-left">Create New Panel Locations</h4>
      <button type="button" class="close pull-right" (click)="closeFirstModal()" aria-label="Close" >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form class="smart-form" novalidate="novalidate">
        <fieldset>
            <section>
              <label class="label">Client Company <b class="text-danger">*</b></label>
              <label class="select">
                <select>
                  <option value="0" selected="selected">-- Select Client Company --</option>
                  <option *ngFor="let client of client_array" [ngValue]="client.company">{{ client.company}}</option>
                </select> <i class="fa fa-plus"></i>
              </label>
            </section>
        
            <section>
              <label class="label">Zona Location <b class="text-danger">*</b></label>
              <label class="select">
                <select>
                  <option value="0">-- Zona Location --</option>
                  <option *ngFor="let zona of zona_array" [ngValue]="zona.zona_name">{{zona.zona_name}}</option>
                </select> <i class="fa fa-plus"></i>
              </label>
            </section>

            <section>
              <label class="label">Panel Name</label>
              <label class="input">
                <i class="icon-append fa fa-columns"></i>
                <input type="text" name="company" placeholder="Panel Name" [(ngModel)]="company">
              </label>
            </section>

            <section>
              <label class="label">Serial Number</label>
              <label class="input">
                <i class="icon-append fa fa-sort-numeric-desc"></i>
                <input type="text" name="company" placeholder="Serial Number" [(ngModel)]="company">
              </label>
            </section>

            <section>
              <label class="label">Total Panel Capacity</label>
              <label class="input">
                <i class="icon-append fa fa-bolt"></i>
                <input type="text" name="company" placeholder="Total Panel Capacity" [(ngModel)]="company">
              </label>
            </section>

            <section>
              <label class="label">Panel Description</label>
              <label class="input">
                <i class="icon-append fa fa-sticky-note"></i>
                <input type="text" name="company" placeholder="Panel Description" [(ngModel)]="company">
              </label>
            </section>

            <section>
              <label class="label">Installation Date</label>
              <label class="input">
                <i class="icon-append fa fa-calendar"></i>
                <input type="text" name="company" [(ngModel)]="company">
              </label>
            </section>

          </fieldset>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" (click)="closeFirstModal()">Cancel</button>
      <button type="button" class="btn btn-success" *ngIf="!client.id" (click)="createClient(company);">Create</button>
    </div>
  </ng-template>